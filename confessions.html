<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Spicy Confessions</title>
    <link rel="stylesheet" href="confessions.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
    
    <!-- Preconnect hints for performance -->
    <link rel="preconnect" href="https://auth.farcaster.xyz">
    <link rel="preconnect" href="https://unpkg.com">
    
    <!-- Meta tags for Mini App -->
    <meta name="description" content="Share your secrets anonymously with a fun, spicy design theme. A mobile-responsive confession app for Farcaster users.">
    <meta name="keywords" content="farcaster, mini app, confessions, anonymous, social, secrets">
    
    <!-- Open Graph Meta Tags for Mini App Embedding -->
    <meta property="og:title" content="ðŸ”¥ Spicy Confessions - Share Your Secrets Anonymously">
    <meta property="og:description" content="A mobile-responsive web application for sharing anonymous confessions with a fun, spicy design theme.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://confessions-five.vercel.app">
    <meta property="og:image" content="https://confessions-five.vercel.app/public/icon.png">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <meta property="og:site_name" content="Spicy Confessions">
    
    <!-- Twitter Card Meta Tags -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="ðŸ”¥ Spicy Confessions - Share Your Secrets Anonymously">
    <meta name="twitter:description" content="A mobile-responsive web application for sharing anonymous confessions with a fun, spicy design theme.">
    <meta name="twitter:image" content="https://confessions-five.vercel.app/public/icon.png">
    
    <!-- Farcaster Mini App Meta Tags -->
    <meta name="farcaster:app" content="true">
    <meta name="farcaster:app:name" content="Spicy Confessions">
    <meta name="farcaster:app:version" content="1">
    <meta name="farcaster:app:category" content="social">
    <meta name="farcaster:app:description" content="Share your secrets anonymously with a fun, spicy design theme">
    <meta name="farcaster:app:icon" content="https://confessions-five.vercel.app/public/icon.png">
    <meta name="farcaster:app:image" content="https://confessions-five.vercel.app/public/header.png">
    
    <!-- Critical Meta Tag for Mini App Embed -->
    <meta name="fc:miniapp" content='{"version":"1","imageUrl":"https://confessions-five.vercel.app/public/header.png","button":{"title":"Share Confession","action":{"type":"launch_miniapp","name":"Spicy Confessions","url":"https://confessions-five.vercel.app","splashImageUrl":"https://confessions-five.vercel.app/public/icon.png","splashBackgroundColor":"#ff6b6b"}}}' />
</head>
<body>
    <div class="container">
        <!-- Header with Spicy Tongue -->
        <header class="header">
            <div class="spicy-tongue">
                <div class="tongue-base"></div>
                <div class="tongue-tip"></div>
                <div class="tongue-spice spice1"></div>
                <div class="tongue-spice spice2"></div>
                <div class="tongue-spice spice3"></div>
            </div>
            <h1 class="title">ðŸ”¥ Spicy Confessions ðŸ”¥</h1>
            <p class="subtitle">Share your secrets anonymously</p>
        </header>

        <!-- Post Button (Always on top) -->
        <div class="post-button-container">
            <button class="post-btn" id="postBtn">
                <span class="btn-text">ðŸ’­ Share Confession</span>
                <span class="btn-icon">+</span>
            </button>
        </div>

        <!-- Confession Input Modal -->
        <div class="modal" id="confessionModal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2>ðŸ’­ Write Your Confession</h2>
                    <button class="close-btn" id="closeModal">&times;</button>
                </div>
                <div class="modal-body">
                    <textarea 
                        id="confessionText" 
                        placeholder="Type your anonymous confession here..."
                        maxlength="500"
                    ></textarea>
                    <div class="char-count">
                        <span id="charCount">0</span>/500
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="cancel-btn" id="cancelBtn">Cancel</button>
                    <button class="submit-btn" id="submitBtn">Post Confession</button>
                </div>
            </div>
        </div>

        <!-- Confessions Feed -->
        <div class="confessions-feed" id="confessionsFeed">
            <div class="feed-header">
                <h3>ðŸ”¥ Latest Confessions</h3>
                <div class="feed-stats">
                    <span id="confessionCount">0</span> confessions shared
                </div>
            </div>
            <div class="confessions-list" id="confessionsList">
                <!-- Confessions will be dynamically added here -->
            </div>
        </div>
    </div>

    <!-- Farcaster Mini App SDK -->
    <script type="module">
        import { sdk } from 'https://esm.sh/@farcaster/miniapp-sdk';
        window.sdk = sdk;
    </script>
    
    <!-- Supabase -->
    <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
    <script src="config.js"></script>
    <script src="confessions.js"></script>
</body>
</html>
